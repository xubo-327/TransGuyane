# TransGuyane ä»“åº“ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªå®Œæ•´çš„ä»“åº“ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«ç”¨æˆ·ç«¯å’Œç®¡ç†ç«¯ï¼Œæ”¯æŒå¾®ä¿¡ä¸€é”®ç™»å½•ã€è®¢å•ç®¡ç†ã€æ‰¹æ¬¡ç®¡ç†ã€æ¶ˆæ¯é€šä¿¡å’ŒExcelå¯¼å‡ºç­‰åŠŸèƒ½ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¼€å‘ç¯å¢ƒ

```bash
# å®‰è£…ä¾èµ–
npm run install-all

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå‰åç«¯åŒæ—¶å¯åŠ¨ï¼‰
npm run dev

# æˆ–åˆ†åˆ«å¯åŠ¨
npm run dev:backend  # åç«¯ï¼šhttp://localhost:5000
npm run dev:frontend # å‰ç«¯ï¼šhttp://localhost:3000
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

- **å‰ç«¯éƒ¨ç½²**ï¼šGitHub Pagesï¼ˆå…è´¹ï¼‰
- **åç«¯éƒ¨ç½²**ï¼šVercelï¼ˆå…è´¹ï¼Œæ¨èï¼‰â­ æˆ– Oracle Cloud Free Tierï¼ˆå¤‡é€‰ï¼‰
- **æ•°æ®åº“**ï¼šMongoDB Atlasï¼ˆå…è´¹M0æˆ–ä»˜è´¹M2ï¼‰

**å®Œå…¨å…è´¹æ–¹æ¡ˆ**ï¼šå‰ç«¯ + åç«¯ + æ•°æ®åº“ = **$0/æœˆ** âœ…
**éƒ¨ç½²æ—¶é—´**ï¼šçº¦1å°æ—¶

è¯¦ç»†éƒ¨ç½²æŒ‡å—è¯·æŸ¥çœ‹ï¼š
- [å®Œæ•´éƒ¨ç½²æ–¹æ¡ˆ](./docs/deployment/DEPLOYMENT_PLAN.md)
- [Vercelåç«¯éƒ¨ç½²æŒ‡å—](./docs/deployment/VERCEL_DEPLOYMENT.md) â­ **æ¨è**
- [å…è´¹äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—](./docs/deployment/FREE_SERVER_DEPLOYMENT.md)ï¼ˆå¤‡é€‰ï¼‰

## åŠŸèƒ½ç‰¹æ€§

### ç”¨æˆ·ç«¯
- âœ… å¾®ä¿¡ä¸€é”®ç™»å½•
- âœ… å•å·åº“å†…æœç´¢ï¼ˆæ”¯æŒå¢åˆ æ”¹æŸ¥ï¼‰
- âœ… è®¢å•å½•å…¥é¡µé¢ï¼ˆæ”¯æŒå¤šå•å·ç²˜è´´ï¼Œè‡ªåŠ¨åˆå¹¶ç›¸åŒå•å·ï¼‰
- âœ… ä¿¡æ¯é¡µé¢ï¼ˆæŸ¥çœ‹ç‰©æµä¿¡æ¯ã€æ‰¹æ¬¡ã€çŠ¶æ€ï¼‰
- âœ… æ‰¹æ¬¡é¡µé¢ï¼ˆæŸ¥çœ‹æ‰€æœ‰å†å²æ‰¹æ¬¡å’Œå•å·ï¼‰
- âœ… æ¶ˆæ¯é¡µé¢ï¼ˆä¸ç®¡ç†ç«¯äº’å‘æ¶ˆæ¯ï¼‰

### ç®¡ç†ç«¯
- âœ… å¾®ä¿¡ä¸€é”®ç™»å½•
- âœ… å•å·åº“å†…æœç´¢ï¼ˆæ”¯æŒå¯¹æ‰€æœ‰æ•°æ®å¢åˆ æ”¹æŸ¥ï¼‰
- âœ… ä¸Šä¼ æ•°æ®é¡µé¢ï¼ˆåˆ›å»ºæ‰¹æ¬¡ã€æ‰«ç æª/æ‰‹åŠ¨è¾“å…¥å•å·ã€Excelå¯¼å‡ºï¼‰
- âœ… æ‰¹æ¬¡ç®¡ç†é¡µé¢ï¼ˆæŸ¥çœ‹ã€ç­›é€‰ã€æœç´¢æ‰¹æ¬¡ä¿¡æ¯ï¼‰
- âœ… æ¶ˆæ¯é¡µé¢ï¼ˆä¸ç”¨æˆ·ç«¯äº’å‘æ¶ˆæ¯ï¼‰

## æŠ€æœ¯æ ˆ

### åç«¯
- Node.js + Express
- MongoDB + Mongoose
- JWTè®¤è¯
- Excelå¯¼å‡ºï¼ˆxlsxï¼‰

### å‰ç«¯
- React 18
- React Router v6
- Ant Design 5
- Axios
- Day.js

## é¡¹ç›®ç»“æ„

```
è´§æŸœæœåŠ¡ç½‘ç«™/
â”œâ”€â”€ backend/              # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/          # è·¯ç”±
â”‚   â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
â”‚   â””â”€â”€ server.js        # æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ frontend/            # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/       # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ user/    # ç”¨æˆ·ç«¯é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ admin/   # ç®¡ç†ç«¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ layouts/     # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/    # Contextä¸Šä¸‹æ–‡
â”‚   â”‚   â””â”€â”€ services/    # APIæœåŠ¡
â”‚   â””â”€â”€ public/
â””â”€â”€ README.md
```

## å®‰è£…å’Œè¿è¡Œ

### å‰ç½®è¦æ±‚
- Node.js >= 14.0.0
- MongoDB >= 4.0.0
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆå‰åç«¯ï¼‰
npm run install-all

# æˆ–åˆ†åˆ«å®‰è£…
cd backend && npm install
cd ../frontend && npm install
```

### é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `backend/.env` æ–‡ä»¶ï¼š

```env
PORT=5000
MONGODB_URI=mongodb://localhost:27017/warehouse_management
JWT_SECRET=your_secret_key_here_change_in_production
WECHAT_APPID=your_wechat_appid
WECHAT_SECRET=your_wechat_secret
```

åˆ›å»º `frontend/.env` æ–‡ä»¶ï¼š

```env
REACT_APP_API_URL=http://localhost:5000/api
```

### å¯åŠ¨é¡¹ç›®

#### å¼€å‘æ¨¡å¼ï¼ˆåŒæ—¶å¯åŠ¨å‰åç«¯ï¼‰

```bash
npm run dev
```

#### åˆ†åˆ«å¯åŠ¨

```bash
# å¯åŠ¨åç«¯ï¼ˆç«¯å£5000ï¼‰
cd backend
npm run dev

# å¯åŠ¨å‰ç«¯ï¼ˆç«¯å£3000ï¼‰
cd frontend
npm start
```

### è®¿é—®åº”ç”¨

- å‰ç«¯ï¼šhttp://localhost:3000
- åç«¯APIï¼šhttp://localhost:5000/api

## ä½¿ç”¨è¯´æ˜

### å¾®ä¿¡ç™»å½•é…ç½®

1. åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°ç”³è¯·AppIDå’ŒSecret
2. é…ç½®å›è°ƒåŸŸå
3. åœ¨ `backend/.env` ä¸­å¡«å†™ `WECHAT_APPID` å’Œ `WECHAT_SECRET`

æ³¨æ„ï¼šå¼€å‘ç¯å¢ƒå¯ä»¥ä½¿ç”¨æ¨¡æ‹Ÿç™»å½•ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦é…ç½®çœŸå®çš„å¾®ä¿¡AppIDå’ŒSecretã€‚

### è®¢å•çŠ¶æ€è¯´æ˜

- **åœ¨è·¯ä¸Š**ï¼šè®¢å•åœ¨è¿è¾“é€”ä¸­
- **å·²ç­¾æ”¶**ï¼šç‰©æµçŠ¶æ€æ˜¾ç¤ºå·²ç­¾æ”¶ï¼ˆè‡ªåŠ¨åˆ¤æ–­ï¼‰
- **å·²å‘å‡º**ï¼šç®¡ç†å‘˜å½•å…¥çš„å•å·ä¸ç”¨æˆ·å½•å…¥çš„å•å·åŒ¹é…æ—¶è‡ªåŠ¨æ›´æ–°

### æ‰¹æ¬¡è§„åˆ™

- æ‰¹æ¬¡è‡ªåŠ¨æŒ‰å½“å‰æ—¥æœŸç”Ÿæˆï¼šä¸Šæ—¬ï¼ˆ1-15æ—¥ï¼‰æˆ–ä¸‹æ—¬ï¼ˆ16-31æ—¥ï¼‰
- æ ¼å¼ï¼š`YYYYå¹´MMæœˆä¸Šæ—¬/ä¸‹æ—¬`

### Excelå¯¼å‡º

- å•æ‰¹æ¬¡å¯¼å‡ºï¼šå¯¼å‡ºæŒ‡å®šæ‰¹æ¬¡çš„æ‰€æœ‰è®¢å•
- å…¨éƒ¨è®¢å•å¯¼å‡ºï¼šå¯¼å‡ºæ‰€æœ‰è®¢å•æ•°æ®

## APIæ¥å£è¯´æ˜

### è®¤è¯
- `POST /api/auth/wechat` - å¾®ä¿¡ç™»å½•
- `GET /api/auth/verify` - éªŒè¯token

### è®¢å•
- `GET /api/orders/search` - æœç´¢è®¢å•
- `GET /api/orders` - è·å–è®¢å•åˆ—è¡¨
- `POST /api/orders` - åˆ›å»ºè®¢å•ï¼ˆç”¨æˆ·ï¼‰
- `POST /api/orders/admin/import` - æ‰¹é‡å¯¼å…¥è®¢å•ï¼ˆç®¡ç†å‘˜ï¼‰
- `PUT /api/orders/:id` - æ›´æ–°è®¢å•
- `DELETE /api/orders/:id` - åˆ é™¤è®¢å•

### æ‰¹æ¬¡
- `GET /api/batches` - è·å–æ‰¹æ¬¡åˆ—è¡¨
- `GET /api/batches/:id` - è·å–æ‰¹æ¬¡è¯¦æƒ…
- `POST /api/batches` - åˆ›å»ºæ‰¹æ¬¡ï¼ˆç®¡ç†å‘˜ï¼‰
- `PUT /api/batches/:id` - æ›´æ–°æ‰¹æ¬¡ï¼ˆç®¡ç†å‘˜ï¼‰
- `DELETE /api/batches/:id` - åˆ é™¤æ‰¹æ¬¡ï¼ˆç®¡ç†å‘˜ï¼‰

### æ¶ˆæ¯
- `GET /api/messages/conversations` - è·å–å¯¹è¯åˆ—è¡¨
- `GET /api/messages/:userId` - è·å–å¯¹è¯æ¶ˆæ¯
- `POST /api/messages` - å‘é€æ¶ˆæ¯

### å¯¼å‡º
- `GET /api/export/batch/:batchId` - å¯¼å‡ºæ‰¹æ¬¡è®¢å•
- `GET /api/export/all` - å¯¼å‡ºæ‰€æœ‰è®¢å•

## æ•°æ®æ¨¡å‹

### Userï¼ˆç”¨æˆ·ï¼‰
- openid: å¾®ä¿¡openid
- nickname: æ˜µç§°
- avatar: å¤´åƒ
- role: è§’è‰²ï¼ˆuser/adminï¼‰

### Orderï¼ˆè®¢å•ï¼‰
- orderNumber: å•å·
- customerName: å®¢æˆ·å§“å
- category: ç±»åˆ«
- batch: æ‰¹æ¬¡ID
- batchName: æ‰¹æ¬¡åç§°
- status: çŠ¶æ€ï¼ˆåœ¨è·¯ä¸Š/å·²ç­¾æ”¶/å·²å‘å‡ºï¼‰
- logisticsInfo: ç‰©æµä¿¡æ¯
- userId: ç”¨æˆ·ID
- createdBy: åˆ›å»ºè€…ï¼ˆuser/adminï¼‰

### Batchï¼ˆæ‰¹æ¬¡ï¼‰
- name: æ‰¹æ¬¡åç§°
- period: æ—¶æœŸï¼ˆä¸Šæ—¬/ä¸‹æ—¬ï¼‰
- month: æœˆä»½
- year: å¹´ä»½
- dispatchTime: å‘å‡ºæ—¶é—´
- orderCount: è®¢å•æ•°é‡

### Messageï¼ˆæ¶ˆæ¯ï¼‰
- from: å‘é€è€…ID
- to: æ¥æ”¶è€…ID
- content: æ¶ˆæ¯å†…å®¹
- read: æ˜¯å¦å·²è¯»

## æ³¨æ„äº‹é¡¹

1. **å®‰å…¨æ€§**ï¼šç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹JWT_SECRETï¼Œä½¿ç”¨å¼ºå¯†ç 
2. **å¾®ä¿¡ç™»å½•**ï¼šéœ€è¦é…ç½®çœŸå®çš„å¾®ä¿¡AppIDå’ŒSecret
3. **æ•°æ®åº“**ï¼šå»ºè®®ä½¿ç”¨MongoDBå‰¯æœ¬é›†æˆ–é›†ç¾¤æé«˜å¯ç”¨æ€§
4. **æƒé™æ§åˆ¶**ï¼šç®¡ç†å‘˜è´¦æˆ·éœ€è¦æ‰‹åŠ¨åœ¨æ•°æ®åº“ä¸­è®¾ç½®roleä¸º'admin'

## å¼€å‘æ³¨æ„äº‹é¡¹

- å‰åç«¯æ•°æ®æ ¼å¼ä¿æŒä¸€è‡´
- APIå“åº”ç»Ÿä¸€ä½¿ç”¨JSONæ ¼å¼
- é”™è¯¯ä¿¡æ¯ç»Ÿä¸€è¿”å›æ ¼å¼ï¼š`{ error: 'é”™è¯¯ä¿¡æ¯' }`
- æˆåŠŸå“åº”æ ¹æ®éœ€æ±‚è¿”å›ç›¸åº”æ•°æ®

## è®¸å¯è¯

MIT
