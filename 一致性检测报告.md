# å‰åç«¯ä¸æ•°æ®åº“ä¸€è‡´æ€§æ£€æµ‹æŠ¥å‘Š

**æ£€æµ‹æ—¶é—´**: 2026å¹´1æœˆ20æ—¥
**æ£€æµ‹äºº**: AI Assistant

---

## ä¸€ã€API ç«¯ç‚¹ä¸€è‡´æ€§æ£€æµ‹

### âœ… è®¤è¯æ¨¡å— (auth)

| å‰ç«¯ API | åç«¯è·¯ç”± | çŠ¶æ€ |
|---------|---------|------|
| `POST /auth/register` | âœ… `router.post('/register')` | ä¸€è‡´ |
| `POST /auth/login` | âœ… `router.post('/login')` | ä¸€è‡´ |
| `POST /auth/wechat` | âœ… `router.post('/wechat')` | ä¸€è‡´ |
| `GET /auth/verify` | âœ… `router.get('/verify')` | ä¸€è‡´ |

### âœ… è®¢å•æ¨¡å— (orders)

| å‰ç«¯ API | åç«¯è·¯ç”± | çŠ¶æ€ |
|---------|---------|------|
| `GET /orders/search` | âœ… `router.get('/search')` | ä¸€è‡´ |
| `GET /orders` | âœ… `router.get('/')` | ä¸€è‡´ |
| `GET /orders/:id` | âœ… `router.get('/:id')` | ä¸€è‡´ |
| `POST /orders` | âœ… `router.post('/')` | ä¸€è‡´ |
| `PUT /orders/:id` | âœ… `router.put('/:id')` | ä¸€è‡´ |
| `DELETE /orders/:id` | âœ… `router.delete('/:id')` | ä¸€è‡´ |
| `GET /orders/admin/list` | âœ… `router.get('/admin/list')` | ä¸€è‡´ |
| `POST /orders/admin/create` | âœ… `router.post('/admin/create')` | ä¸€è‡´ |
| `PUT /orders/admin/:id` | âœ… `router.put('/admin/:id')` | ä¸€è‡´ |
| `DELETE /orders/admin/:id` | âœ… `router.delete('/admin/:id')` | ä¸€è‡´ |
| `POST /orders/admin/batch-delete` | âœ… `router.post('/admin/batch-delete')` | ä¸€è‡´ |
| `POST /orders/admin/import` | âœ… `router.post('/admin/import')` | ä¸€è‡´ |

### âœ… æ‰¹æ¬¡æ¨¡å— (batches)

| å‰ç«¯ API | åç«¯è·¯ç”± | çŠ¶æ€ |
|---------|---------|------|
| `GET /batches` | âœ… `router.get('/')` | ä¸€è‡´ |
| `GET /batches/:id` | âœ… `router.get('/:id')` | ä¸€è‡´ |
| `POST /batches` | âœ… `router.post('/')` | ä¸€è‡´ |
| `PUT /batches/:id` | âœ… `router.put('/:id')` | ä¸€è‡´ |
| `DELETE /batches/:id` | âœ… `router.delete('/:id')` | ä¸€è‡´ |

### âœ… æ¶ˆæ¯æ¨¡å— (messages)

| å‰ç«¯ API | åç«¯è·¯ç”± | çŠ¶æ€ |
|---------|---------|------|
| `GET /messages/conversations` | âœ… `router.get('/conversations')` | ä¸€è‡´ |
| `GET /messages/:userId` | âœ… `router.get('/:userId')` | ä¸€è‡´ |
| `POST /messages` | âœ… `router.post('/')` | ä¸€è‡´ |
| `PUT /messages/:messageId/read` | âœ… `router.put('/:messageId/read')` | ä¸€è‡´ |
| `POST /messages/conversation` | âœ… `router.post('/conversation')` | ä¸€è‡´ |

### âœ… ç”¨æˆ·æ¨¡å— (users)

| å‰ç«¯ API | åç«¯è·¯ç”± | çŠ¶æ€ |
|---------|---------|------|
| `GET /users` | âœ… `router.get('/')` | ä¸€è‡´ |
| `GET /users/:id` | âœ… `router.get('/:id')` | ä¸€è‡´ |
| `GET /users/search` | âœ… `router.get('/search')` | ä¸€è‡´ |
| `PUT /users/:id/role` | âœ… `router.put('/:id/role')` | ä¸€è‡´ |
| `DELETE /users/:id` | âœ… `router.delete('/:id')` | ä¸€è‡´ |

### âœ… å¯¼å‡ºæ¨¡å— (export)

| å‰ç«¯ API | åç«¯è·¯ç”± | çŠ¶æ€ |
|---------|---------|------|
| `GET /export/batch/:batchId` | âœ… `router.get('/batch/:batchId')` | ä¸€è‡´ |
| `POST /export/batches` | âœ… `router.post('/batches')` | ä¸€è‡´ |
| `GET /export/all` | âœ… `router.get('/all')` | ä¸€è‡´ |
| `GET /export/all-batches` | âœ… `router.get('/all-batches')` | ä¸€è‡´ |

### âœ… ç‰©æµæ¨¡å— (logistics)

| å‰ç«¯ API | åç«¯è·¯ç”± | çŠ¶æ€ |
|---------|---------|------|
| `GET /logistics/:orderNumber` | âœ… `router.get('/:orderNumber')` | ä¸€è‡´ |
| `POST /logistics/batch` | âœ… `router.post('/batch')` | ä¸€è‡´ |
| `POST /logistics/refresh/:id` | âœ… `router.post('/refresh/:id')` | ä¸€è‡´ |
| `GET /logistics/detect/:orderNumber` | âœ… `router.get('/detect/:orderNumber')` | ä¸€è‡´ |

---

## äºŒã€æ•°æ®åº“æ¨¡å‹ä¸€è‡´æ€§æ£€æµ‹

### âœ… Order æ¨¡å‹

| å­—æ®µ | ç±»å‹ | ç”¨é€” | çŠ¶æ€ |
|-----|------|------|------|
| `orderNumber` | String | è®¢å•å· | âœ… å·²ä½¿ç”¨ |
| `customerName` | String | å®¢æˆ·å§“å | âœ… å·²ä½¿ç”¨ |
| `category` | String | ç±»åˆ«ï¼ˆä¿ç•™ï¼‰ | âš ï¸ å‰ç«¯å·²ä¸å†ä½¿ç”¨ |
| `batch` | ObjectId | æ‰¹æ¬¡å¼•ç”¨ | âœ… å·²ä½¿ç”¨ |
| `batchName` | String | æ‰¹æ¬¡åç§°ï¼ˆå†—ä½™ï¼‰ | âœ… å·²ä½¿ç”¨ |
| `status` | Enum | çŠ¶æ€ | âœ… å·²ä½¿ç”¨ |
| `logisticsInfo` | String | æœ€æ–°ç‰©æµä¿¡æ¯ | âœ… å·²ä½¿ç”¨ |
| `logisticsHistory` | Array | ç‰©æµå†å² | âœ… å·²ä½¿ç”¨ |
| `courierCode` | String | å¿«é€’å…¬å¸ç¼–ç  | âœ… å·²ä½¿ç”¨ |
| `courierName` | String | å¿«é€’å…¬å¸åç§° | âœ… å·²ä½¿ç”¨ |
| `logisticsQueryStatus` | Enum | æŸ¥è¯¢çŠ¶æ€ | âœ… å·²ä½¿ç”¨ |
| `lastQueryTime` | Date | ä¸Šæ¬¡æŸ¥è¯¢æ—¶é—´ | âœ… å·²ä½¿ç”¨ |
| `userId` | ObjectId | ç”¨æˆ·å¼•ç”¨ | âœ… å·²ä½¿ç”¨ |
| `createdBy` | Enum | åˆ›å»ºè€…ç±»å‹ | âœ… å·²ä½¿ç”¨ |

### âœ… Batch æ¨¡å‹

| å­—æ®µ | ç±»å‹ | ç”¨é€” | çŠ¶æ€ |
|-----|------|------|------|
| `name` | String | æ‰¹æ¬¡åç§° | âœ… å·²ä½¿ç”¨ |
| `period` | Enum | æ—¶æœŸï¼ˆä¸Šæ—¬/ä¸‹æ—¬ï¼‰ | âœ… å·²ä½¿ç”¨ |
| `month` | Number | æœˆä»½ | âœ… å·²ä½¿ç”¨ |
| `year` | Number | å¹´ä»½ | âœ… å·²ä½¿ç”¨ |
| `dispatchTime` | Date | å‘è´§æ—¶é—´ | âœ… å·²ä½¿ç”¨ |
| `orderCount` | Number | è®¢å•æ•°é‡ | âœ… å·²ä½¿ç”¨ |
| `createdBy` | ObjectId | åˆ›å»ºè€… | âœ… å·²ä½¿ç”¨ |

### âœ… User æ¨¡å‹

| å­—æ®µ | ç±»å‹ | ç”¨é€” | çŠ¶æ€ |
|-----|------|------|------|
| `username` | String | ç”¨æˆ·å | âœ… å·²ä½¿ç”¨ |
| `email` | String | é‚®ç®± | âœ… å·²ä½¿ç”¨ |
| `phone` | String | æ‰‹æœºå· | âœ… å·²ä½¿ç”¨ |
| `password` | String | å¯†ç  | âœ… å·²ä½¿ç”¨ |
| `openid` | String | å¾®ä¿¡OpenID | âœ… å·²ä½¿ç”¨ |
| `nickname` | String | æ˜µç§° | âœ… å·²ä½¿ç”¨ |
| `avatar` | String | å¤´åƒ | âœ… å·²ä½¿ç”¨ |
| `loginType` | Enum | ç™»å½•ç±»å‹ | âœ… å·²ä½¿ç”¨ |
| `role` | Enum | è§’è‰² | âœ… å·²ä½¿ç”¨ |

### âœ… Message æ¨¡å‹

| å­—æ®µ | ç±»å‹ | ç”¨é€” | çŠ¶æ€ |
|-----|------|------|------|
| `from` | ObjectId | å‘é€è€… | âœ… å·²ä½¿ç”¨ |
| `to` | ObjectId | æ¥æ”¶è€… | âœ… å·²ä½¿ç”¨ |
| `content` | String | æ¶ˆæ¯å†…å®¹ | âœ… å·²ä½¿ç”¨ |
| `read` | Boolean | å·²è¯»çŠ¶æ€ | âœ… å·²ä½¿ç”¨ |

---

## ä¸‰ã€deploy-package ä¸€è‡´æ€§æ£€æµ‹

### åç«¯æ–‡ä»¶å¯¹æ¯”

| æ–‡ä»¶ | ä¸»é¡¹ç›® | deploy-package | çŠ¶æ€ |
|-----|--------|---------------|------|
| `server.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | éœ€åŒæ­¥ |
| `routes/auth.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `routes/orders.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `routes/batches.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `routes/messages.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `routes/users.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `routes/export.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `routes/logistics.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `services/logisticsService.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `middleware/auth.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `models/*` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |

### å‰ç«¯æ–‡ä»¶å¯¹æ¯”

| æ–‡ä»¶ | ä¸»é¡¹ç›® | deploy-package | çŠ¶æ€ |
|-----|--------|---------------|------|
| `App.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `services/api.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `contexts/AuthContext.js` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `layouts/*` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |
| `pages/*` | âœ… å­˜åœ¨ | âœ… å­˜åœ¨ | ä¸€è‡´ |

---

## å››ã€æ£€æµ‹ç»“è®º

### âœ… é€šè¿‡é¡¹

1. **API ç«¯ç‚¹å®Œå…¨ä¸€è‡´** - å‰ç«¯æ‰€æœ‰ API è°ƒç”¨å‡æœ‰å¯¹åº”çš„åç«¯è·¯ç”±
2. **æ•°æ®åº“æ¨¡å‹å®Œæ•´** - æ‰€æœ‰å¿…è¦å­—æ®µéƒ½å·²å®šä¹‰
3. **è®¤è¯ä¸­é—´ä»¶å®Œå–„** - æ”¯æŒå¿…é¡»è®¤è¯ã€å¯é€‰è®¤è¯ã€ç®¡ç†å‘˜æƒé™ä¸‰ç§æ¨¡å¼
4. **deploy-package ç»“æ„å®Œæ•´** - æ–‡ä»¶ç»“æ„ä¸ä¸»é¡¹ç›®ä¸€è‡´

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **Order.category å­—æ®µ** - å‰ç«¯å·²ä¸å†ä½¿ç”¨æ­¤å­—æ®µï¼Œä½†æ•°æ®åº“æ¨¡å‹ä¸­ä»ä¿ç•™ï¼ˆå‘åå…¼å®¹ï¼‰
2. **JWT_SECRET ç¯å¢ƒå˜é‡** - åç«¯ä½¿ç”¨ `process.env.JWT_SECRET || 'default_secret'` ä½œä¸ºå›é€€
3. **MONGODB_URI ç¯å¢ƒå˜é‡** - åç«¯ä½¿ç”¨é»˜è®¤æœ¬åœ°è¿æ¥ä½œä¸ºå›é€€

### ğŸ“‹ å»ºè®®

1. ç¡®ä¿ç”Ÿäº§ç¯å¢ƒæ­£ç¡®é…ç½® `.env` æ–‡ä»¶
2. å®šæœŸåŒæ­¥ deploy-package ä¸ä¸»é¡¹ç›®ä»£ç 
3. è€ƒè™‘ç§»é™¤ä¸å†ä½¿ç”¨çš„ `category` å­—æ®µï¼ˆå¯é€‰ï¼‰

---

## äº”ã€æ–‡ä»¶ç»“æ„

```
backend/
â”œâ”€â”€ server.js           # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ auth.js         # è®¤è¯ä¸­é—´ä»¶
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ User.js         # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ Order.js        # è®¢å•æ¨¡å‹
â”‚   â”œâ”€â”€ Batch.js        # æ‰¹æ¬¡æ¨¡å‹
â”‚   â””â”€â”€ Message.js      # æ¶ˆæ¯æ¨¡å‹
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.js         # è®¤è¯è·¯ç”±
â”‚   â”œâ”€â”€ orders.js       # è®¢å•è·¯ç”±
â”‚   â”œâ”€â”€ batches.js      # æ‰¹æ¬¡è·¯ç”±
â”‚   â”œâ”€â”€ messages.js     # æ¶ˆæ¯è·¯ç”±
â”‚   â”œâ”€â”€ users.js        # ç”¨æˆ·è·¯ç”±
â”‚   â”œâ”€â”€ export.js       # å¯¼å‡ºè·¯ç”±
â”‚   â””â”€â”€ logistics.js    # ç‰©æµè·¯ç”±
â””â”€â”€ services/
    â””â”€â”€ logisticsService.js  # ç‰©æµæŸ¥è¯¢æœåŠ¡

frontend/src/
â”œâ”€â”€ App.js              # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ services/
â”‚   â””â”€â”€ api.js          # API æœåŠ¡
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ AuthContext.js  # è®¤è¯ä¸Šä¸‹æ–‡
â”œâ”€â”€ layouts/
â”‚   â”œâ”€â”€ UserLayout.js   # ç”¨æˆ·å¸ƒå±€
â”‚   â””â”€â”€ AdminLayout.js  # ç®¡ç†å‘˜å¸ƒå±€
â””â”€â”€ pages/
    â”œâ”€â”€ Login.js        # ç™»å½•é¡µ
    â”œâ”€â”€ Register.js     # æ³¨å†Œé¡µ
    â”œâ”€â”€ user/           # ç”¨æˆ·é¡µé¢
    â””â”€â”€ admin/          # ç®¡ç†å‘˜é¡µé¢
```

---

**æ£€æµ‹ç»“æœ: âœ… å‰åç«¯ä¸æ•°æ®åº“ä¸€è‡´æ€§è‰¯å¥½**
